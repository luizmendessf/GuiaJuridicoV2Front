/* src/components/sections/about/OrganizersCarousel.css */

.organizers-carousel {
  position: relative;
  display: flex;
  align-items: center;
  gap: 1rem;
  max-width: 64rem;
  margin: 0 auto;
  /* Garante que sombras e conteúdo não gerem scroll interno */
  overflow: visible;
}

.carousel-stage {
  position: relative;
  /* Clipa horizontalmente para esconder slots externos e mantém sombras verticais */
  overflow-x: hidden;
  overflow-y: visible;
  width: 100%;
  min-height: 36rem; /* espaço suficiente para cards + sombras */
  padding-bottom: 2rem; /* mais espaço para sombras no rodapé */
}

.carousel-track {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Itens em layout absoluto para mostrar esquerda/centro/direita simultaneamente */
.carousel-item {
  position: absolute;
  top: 0;
  width: 32%;
  height: var(--card-height, auto);
  transition: left 0.38s ease-in-out, transform 0.38s ease-in-out, opacity 0.38s ease-in-out, filter 0.38s ease-in-out;
  will-change: left, transform, opacity;
}

/* Desativa transições durante o reset pós-animação para evitar flicker */
.no-transition .carousel-item {
  transition: none !important;
  will-change: auto;
}

/* Posições base */
.position-left {
  left: 2%;
  transform: scale(0.86);
  opacity: 0.75;
  filter: saturate(0.9);
  z-index: 1;
}
.position-center {
  left: 34%;
  transform: scale(1);
  opacity: 1;
  z-index: 2;
}
.position-right {
  left: 66%;
  transform: scale(0.86);
  opacity: 0.75;
  filter: saturate(0.9);
  z-index: 1;
}

/* Slots externos (fora da área visível) para entrada suave */
.position-outside-right {
  left: 108%;
  transform: scale(0.86);
  opacity: 0;
  filter: saturate(0.9);
  z-index: 0;
}
.position-outside-left {
  left: -40%;
  transform: scale(0.86);
  opacity: 0;
  filter: saturate(0.9);
  z-index: 0;
}

/* Animação para próxima (desliza para esquerda) */
.shift-next .position-left {
  left: -40%;
  opacity: 0;
}
.shift-next .position-center {
  left: 2%;
  transform: scale(0.86);
  opacity: 0.75;
}
.shift-next .position-right {
  left: 34%;
  transform: scale(1);
  opacity: 1;
}
/* Novo item vindo da direita ocupa a posição-right durante o shift */
.shift-next .position-outside-right {
  left: 66%;
  opacity: 0.75;
}

/* Animação para anterior (desliza para direita) */
.shift-prev .position-right {
  left: 108%;
  opacity: 0;
}
.shift-prev .position-center {
  left: 66%;
  transform: scale(0.86);
  opacity: 0.75;
}
.shift-prev .position-left {
  left: 34%;
  transform: scale(1);
  opacity: 1;
}
/* Novo item vindo da esquerda ocupa a posição-left durante o shift */
.shift-prev .position-outside-left {
  left: 2%;
  opacity: 0.75;
}

.carousel-item {
  flex: 0 0 33.333%;
  padding: 0.5rem;
  transition: transform 0.35s ease, opacity 0.35s ease, filter 0.35s ease;
}

.position-center { 
  transform: scale(1);
  opacity: 1;
  z-index: 2;
}
.position-left, .position-right { 
  transform: scale(0.86);
  opacity: 0.75;
  filter: saturate(0.9);
  z-index: 1;
}

.carousel-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  border: none;
  background: linear-gradient(to right, var(--color-primary-500), var(--color-secondary-500));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  z-index: 50; /* acima dos cards */
}
.carousel-arrow:hover { transform: translateY(-50%) scale(1.05); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.25); }
.carousel-arrow.left { left: -0.75rem; }
.carousel-arrow.right { right: -0.75rem; }

@media (max-width: 768px) {
  .organizers-carousel { gap: 0.5rem; }
  .carousel-item { width: 36%; }
  .position-left { left: 0%; transform: scale(0.82); }
  .position-center { left: 32%; }
  .position-right { left: 64%; transform: scale(0.82); }
}

/* Dark mode adjustments */
html.dark .carousel-arrow { 
  background: linear-gradient(to right, var(--color-primary-600), var(--color-secondary-600));
}

/* Mobile: show only one card at a time and keep content inside */
@media (max-width: 640px) {
  .organizers-carousel {
    max-width: 100%;
    gap: 0.5rem;
  }
  .carousel-stage {
    overflow: hidden;
    /* Altura baseada no item central visível */
    min-height: unset;
    padding-bottom: 0.5rem;
  }
  .carousel-track { height: auto; }
  .carousel-item {
    width: 100%;
    padding: 0.25rem;
    height: auto;
    left: 0; /* base para animação via transform */
    transition: transform 0.38s ease-in-out, opacity 0.38s ease-in-out;
    will-change: transform, opacity;
  }

  /* Hide side previews on mobile */
  /* Mantém slots laterais fora da tela para transição correta */
  .position-left { transform: translateX(-100%) scale(1); opacity: 0; z-index: 1; }
  .position-right { transform: translateX(100%) scale(1); opacity: 0; z-index: 1; }

  /* Positions for single-card slide transitions */
  .position-center { position: relative; transform: translateX(0) scale(1); opacity: 1; z-index: 2; }
  .position-outside-right { transform: translateX(200%) scale(1); opacity: 0; z-index: 1; }
  .position-outside-left  { transform: translateX(-200%) scale(1); opacity: 0; z-index: 1; }

  /* Next: current slides left, RIGHT enters center */
  .shift-next .position-center { position: absolute; transform: translateX(-100%) scale(1); opacity: 0.75; }
  .shift-next .position-right { position: relative; transform: translateX(0) scale(1); opacity: 1; }
  .shift-next .position-outside-right { transform: translateX(100%) scale(1); opacity: 0.75; }

  /* Prev: current slides right, LEFT enters center */
  .shift-prev .position-center { position: absolute; transform: translateX(100%) scale(1); opacity: 0.75; }
  .shift-prev .position-left { position: relative; transform: translateX(0) scale(1); opacity: 1; }
  .shift-prev .position-outside-left { transform: translateX(-100%) scale(1); opacity: 0.75; }
}